<!DOCTYPE html>
<html lang="es">
  <head>
    <!-- Hotjar Tracking Code for https://moralesmozart.github.io/travel-platform/ -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:6507380,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#4CAF50" />
    <meta
      name="description"
      content="Plataforma de masías catalanas - Descubre las masías más auténticas de Cataluña"
    />
    <meta name="author" content="Mozart Morales" />
    <meta name="robots" content="index, follow" />
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://static.hotjar.com https://*.hotjar.com;
      style-src 'self' 'unsafe-inline' https://*.hotjar.com;
      img-src 'self' data: https: https://*.hotjar.com;
      font-src 'self' data: https://*.hotjar.com;
      connect-src 'self' https://*.hotjar.com wss://*.hotjar.com;
      frame-src https://*.hotjar.com;
      frame-ancestors 'none';
    " />
    
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <title>Travel Platform - Masías Catalanas</title>
  </head>
  <body>
    <noscript>Necesitas habilitar JavaScript para usar esta aplicación.</noscript>
    <div id="root"></div>
    
    <!-- Simple SPA routing script -->
    <script type="text/javascript">
      // Handle route redirection from 404.html
      (function() {
        var l = window.location;
        var searchParams = new URLSearchParams(l.search);
        var route = searchParams.get('route');
        
        if (route) {
          // Remove the route parameter
          searchParams.delete('route');
          var newSearch = searchParams.toString();
          var newUrl = l.pathname + (newSearch ? '?' + newSearch : '') + l.hash;
          
          // Update the URL without reloading the page
          window.history.replaceState(null, null, newUrl);
          
          // Trigger navigation event for React Router
          if (route) {
            window.dispatchEvent(new CustomEvent('routeChange', { 
              detail: { route: '/' + route } 
            }));
          }
        }
      })();
    </script>
  </body>
</html>
